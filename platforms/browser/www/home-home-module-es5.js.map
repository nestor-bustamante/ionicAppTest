{"version":3,"sources":["src/app/home/home.page.html","src/app/home/home.module.ts","src/app/home/home.page.scss","src/app/home/home.page.ts"],"names":[],"mappings":"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","sourcesContent":["export default \"<ion-header [translucent]=\\\"true\\\">\\n  <ion-toolbar>\\n    <ion-title>\\n      Ingresar\\n    </ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content [fullscreen]=\\\"true\\\">\\n  <ion-header collapse=\\\"condense\\\">\\n    <ion-toolbar>\\n      <ion-title size=\\\"large\\\">Ingresar</ion-title>\\n    </ion-toolbar>\\n  </ion-header>\\n\\n  <div id=\\\"container\\\">\\n    <ion-card>\\n\\n      <ion-progress-bar *ngIf=\\\"loading\\\" type=\\\"indeterminate\\\"></ion-progress-bar>\\n\\n      <div class=\\\"ion-padding-top ion-padding-start ion-padding-end\\\">\\n        <h3 class=\\\"ion-no-margin\\\">Accede a la aplicaci√≥n</h3>\\n      </div>\\n\\n      <div class=\\\"ion-padding-top ion-padding-start ion-padding-end\\\">\\n        <ion-button expand=\\\"block\\\" fill=\\\"outline\\\" color=\\\"primary\\\" (click)=\\\"fbLogin()\\\">\\n          <ion-icon name=\\\"logo-facebook\\\"></ion-icon>\\n          <span class=\\\"ion-padding-start\\\">Ingresar con Facebook</span>\\n        </ion-button>\\n      </div>\\n\\n      <div class=\\\"ion-padding\\\">\\n        <ion-button expand=\\\"block\\\" fill=\\\"outline\\\" color=\\\"danger\\\" (click)=\\\"login()\\\">\\n          <ion-icon name=\\\"logo-google\\\"></ion-icon>\\n          <span class=\\\"ion-padding-start\\\">Ingresar con Google</span>\\n        </ion-button>\\n      </div>\\n\\n    </ion-card>\\n  </div>\\n</ion-content>\\n\"","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { IonicModule } from '@ionic/angular';\nimport { FormsModule } from '@angular/forms';\nimport { RouterModule } from '@angular/router';\n\nimport { HomePage } from './home.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    RouterModule.forChild([\n      {\n        path: '',\n        component: HomePage\n      }\n    ])\n  ],\n  declarations: [HomePage]\n})\nexport class HomePageModule {}\n","export default \"#container {\\n  text-align: center;\\n  position: absolute;\\n  left: 0;\\n  right: 0;\\n  top: 50%;\\n  -webkit-transform: translateY(-50%);\\n          transform: translateY(-50%);\\n}\\n\\n#container strong {\\n  font-size: 20px;\\n  line-height: 26px;\\n}\\n\\n#container p {\\n  font-size: 16px;\\n  line-height: 22px;\\n  color: #8c8c8c;\\n  margin: 0;\\n}\\n\\n#container a {\\n  text-decoration: none;\\n}\\n\\nion-content ion-toolbar {\\n  --background: translucent;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9uZXN0b3JidXN0YW1hbnRlL0RvY3VtZW50cy9QUk9KRUNUUy92aWRlb0FwcC9zcmMvYXBwL2hvbWUvaG9tZS5wYWdlLnNjc3MiLCJzcmMvYXBwL2hvbWUvaG9tZS5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxrQkFBQTtFQUNBLGtCQUFBO0VBQ0EsT0FBQTtFQUNBLFFBQUE7RUFDQSxRQUFBO0VBQ0EsbUNBQUE7VUFBQSwyQkFBQTtBQ0NGOztBREVBO0VBQ0UsZUFBQTtFQUNBLGlCQUFBO0FDQ0Y7O0FERUE7RUFDRSxlQUFBO0VBQ0EsaUJBQUE7RUFFQSxjQUFBO0VBRUEsU0FBQTtBQ0RGOztBRElBO0VBQ0UscUJBQUE7QUNERjs7QURJQTtFQUNFLHlCQUFBO0FDREYiLCJmaWxlIjoic3JjL2FwcC9ob21lL2hvbWUucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiI2NvbnRhaW5lciB7XG4gIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICBsZWZ0OiAwO1xuICByaWdodDogMDtcbiAgdG9wOiA1MCU7XG4gIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtNTAlKTtcbn1cblxuI2NvbnRhaW5lciBzdHJvbmcge1xuICBmb250LXNpemU6IDIwcHg7XG4gIGxpbmUtaGVpZ2h0OiAyNnB4O1xufVxuXG4jY29udGFpbmVyIHAge1xuICBmb250LXNpemU6IDE2cHg7XG4gIGxpbmUtaGVpZ2h0OiAyMnB4O1xuXG4gIGNvbG9yOiAjOGM4YzhjO1xuXG4gIG1hcmdpbjogMDtcbn1cblxuI2NvbnRhaW5lciBhIHtcbiAgdGV4dC1kZWNvcmF0aW9uOiBub25lO1xufVxuXG5pb24tY29udGVudCBpb24tdG9vbGJhciB7XG4gIC0tYmFja2dyb3VuZDogdHJhbnNsdWNlbnQ7XG59IiwiI2NvbnRhaW5lciB7XG4gIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICBsZWZ0OiAwO1xuICByaWdodDogMDtcbiAgdG9wOiA1MCU7XG4gIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtNTAlKTtcbn1cblxuI2NvbnRhaW5lciBzdHJvbmcge1xuICBmb250LXNpemU6IDIwcHg7XG4gIGxpbmUtaGVpZ2h0OiAyNnB4O1xufVxuXG4jY29udGFpbmVyIHAge1xuICBmb250LXNpemU6IDE2cHg7XG4gIGxpbmUtaGVpZ2h0OiAyMnB4O1xuICBjb2xvcjogIzhjOGM4YztcbiAgbWFyZ2luOiAwO1xufVxuXG4jY29udGFpbmVyIGEge1xuICB0ZXh0LWRlY29yYXRpb246IG5vbmU7XG59XG5cbmlvbi1jb250ZW50IGlvbi10b29sYmFyIHtcbiAgLS1iYWNrZ3JvdW5kOiB0cmFuc2x1Y2VudDtcbn0iXX0= */\"","import { Component, OnInit } from '@angular/core';\nimport { AngularFireAuth } from '@angular/fire/auth';\nimport * as firebase from 'firebase/app';\nimport { Facebook, FacebookLoginResponse } from '@ionic-native/facebook/ngx';\nimport { Router } from '@angular/router';\nimport { Platform } from '@ionic/angular';\nimport { GooglePlus } from '@ionic-native/google-plus/ngx';\nimport { Geolocation, Geoposition } from '@ionic-native/geolocation/ngx';\n\n@Component({\n  selector: 'app-home',\n  templateUrl: 'home.page.html',\n  styleUrls: ['home.page.scss'],\n})\nexport class HomePage implements OnInit{\n\n  getLat: any;\n  getLong: any;\n  loading = false;\n  users = {\n    id: '', name: '', email: '', picture: { data: { url: '' } }, location: { location: { city: '', state: '', region_id: '' } }, gender: '', friends: {},\n  };\n\n  constructor(\n    private afAuth: AngularFireAuth,\n    public geolocation: Geolocation,\n    private fb: Facebook,\n    private router: Router,\n    private platform: Platform,\n    private google: GooglePlus\n  ) { }\n  \n  getUserDetail(userid: any) {\n    this.fb.api('/' + userid + '/?fields=id,email,name,picture,gender,friends,location', ['public_profile', 'user_friends', 'user_location', 'user_gender', 'instagram_basic', 'user_age_range', 'user_birthday'])\n      .then(res => {\n        window.localStorage.setItem('user', res.id)\n        this.users = res;\n        this.router.navigate([\"/map\"]);\n      })\n      .catch(e => {\n        console.log(e);\n      });\n  }\n\n  async fbLogin() {\n    this.loading = true;\n    this.fb.login(['public_profile', 'user_friends', 'user_location', 'user_gender', 'instagram_basic', 'user_age_range', 'user_birthday', 'email'])\n      .then((res: FacebookLoginResponse) => {\n\n        const credential = firebase.auth.FacebookAuthProvider.credential(res.authResponse.accessToken);\n\n        firebase.auth().signInWithCredential(credential)\n          .then(info => {\n          /* tslint:disable */\n            window.localStorage.setItem('userName', info.user.displayName);\n            window.localStorage.setItem('userImg', info.user.providerData[\"0\"].photoURL);\n\n            this.getUserDetail(res.authResponse.userID);\n            this.loading = false;\n            this.router.navigate(['/map']);\n          }\n          )\n      })\n      .catch(e => console.log('Error logging into Facebook', e));\n  }\n\n  async login() {\n\n    let params: any;\n\n    console.log(\"this.platform.is('android'): \", this.platform.is('android'));\n    this.loading = true;\n\n    if (this.platform.is('android')) {\n      console.log(this.platform);\n      params = {\n        'scopes': 'profile',\n        'webClientId': '417895518758-737c2rn4s51k1is9foq2sv8jdfde7lqk.apps.googleusercontent.com',\n        'offline': true\n      }\n    } else {\n      params = {}\n    }\n\n    await this.google.login(params)\n      .then(response => {\n        \n        window.localStorage.setItem('userName', response.displayName);\n        window.localStorage.setItem('userImg', response.imageUrl);\n        \n        const { idToken, accessToken } = response\n        this.onLoginSuccess(idToken, accessToken);\n\n      }).catch((error: any) => {\n        console.log(error)\n        alert('error: ' + JSON.stringify(error))\n      });\n  }\n\n  async getGeolocation() {\n\n    this.geolocation.getCurrentPosition().then((resp) => {\n      \n      this.getLat = resp.coords.latitude;\n      this.getLong = resp.coords.longitude;\n\n      window.localStorage.setItem('latlang', `${resp.coords.latitude}, ${resp.coords.longitude}`);\n\n      const date = new Date(resp.timestamp);\n\n    }).catch((error) => {\n      console.log('Error getting location', error);\n    });\n\n    let watch = this.geolocation.watchPosition();\n    watch.subscribe((data) => {\n      window.localStorage.setItem('latlang', `${data.coords.latitude}, ${data.coords.longitude}`)\n      // console.log(data.coords.latitude);\n      // console.log(data.coords.longitude);\n    });\n  }\n\n  onLoginSuccess(accessToken: any, accessSecret: any) {\n    const credential = accessSecret ? firebase.auth.GoogleAuthProvider.credential(accessToken, accessSecret) : firebase.auth.GoogleAuthProvider.credential(accessToken);\n\n    this.afAuth.auth.signInWithCredential(credential)\n      .then((response) => {\n        this.loading = false;\n        this.router.navigate([\"/map\"]);\n      })\n  }\n\n  ngOnInit() {\n    this.getGeolocation();\n  }\n\n}\n"],"sourceRoot":"webpack:///","file":"home-home-module-es5.js"}